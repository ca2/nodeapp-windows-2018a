[Version]
Signature   = "$WINDOWS NT$"
Provider    = %Msft%
Class       = "ActivityMonitor"                         ;This is determined by the work this filter driver does
ClassGuid   = {b86dff51-a31e-4bac-b3cf-e8cfe75c9fc2}    ;This value is determined by the Class
DriverVer   = 02/08/2012,1.0.0.1
CatalogFile = ListOpenedFileDrv_64.cat

[DestinationDirs]
DefaultDestDir = 12
ListOpenedFileDrv.DriverFiles = 12

[SourceDisksNames]
1 = %Disk1%

[SourceDisksFiles]
ListOpenedFileDrv_64.sys=1

[DefaultInstall.ntamd64]
OptionDesc = %ServiceDesc%
CopyFiles = ListOpenedFileDrv.DriverFiles

[ListOpenedFileDr.DriverFiles]
ListOpenedFileDrv_64.sys

[DefaultInstall.Services]
AddService = %ServiceName%,,ListOpenedFileDrv.Service

[ListOpenedFileDrv.Service]
DisplayName    = %ServiceName%
Description    = %ServiceDesc%
ServiceBinary  = %12%\ListOpenedFileDrv_64.sys
ServiceType    = 2 ;    SERVICE_FILE_SYSTEM_DRIVER
StartType      = 1 ;    SERVICE_SYSTEM_START
ErrorControl   = 1 ;    SERVICE_ERROR_NORMAL
LoadOrderGroup = "FSFilter Activity Monitor"
AddReg         = ListOpenedFileDrv.AddRegistry

[ListOpenedFileDrv.AddRegistry]
HKR,Parameters,ExampleParameter,0x00010003,1
HKR,"Instances","DefaultInstance",0x00000000,%DefaultInstance%
HKR,"Instances\"%Instance1.Name%,"Altitude",0x00000000,%Instance1.Altitude%
HKR,"Instances\"%Instance1.Name%,"Flags",0x00010001,%Instance1.Flags%
HKR,"Instances\"%Instance2.Name%,"Altitude",0x00000000,%Instance2.Altitude%
HKR,"Instances\"%Instance2.Name%,"Flags",0x00010001,%Instance2.Flags%
HKR,"Instances\"%Instance3.Name%,"Altitude",0x00000000,%Instance3.Altitude%
HKR,"Instances\"%Instance3.Name%,"Flags",0x00010001,%Instance3.Flags%


[DefaultUninstall]
DelFiles   = ListOpenedFileDrv.DriverFiles
DelReg     = ListOpenedFileDrv.DelRegistry

[DefaultUninstall.Services]
DelService = %ServiceName%,0x200


[Strings]
Msft        = "ca2 Desenvolvimento de Software Ltda."
ServiceDesc = "List Opened File Driver"
ServiceName = "ListOpenedFileDrv"
ParameterPath = "SYSTEM\CurrentControlSet\Services\ListOpenedFileDrv\Parameters"
Disk1       = "List Opened File Driver Media"


;Instances specific information.
DefaultInstance         = "ListOpenedFileDrv - Top Instance"
Instance1.Name          = "ListOpenedFileDrv - Middle Instance"
Instance1.Altitude      = "370000"
Instance1.Flags         = 0x1          ; Suppress automatic attachments
Instance2.Name          = "ListOpenedFileDrv - Bottom Instance"
Instance2.Altitude      = "361000"
Instance2.Flags         = 0x1          ; Suppress automatic attachments
Instance3.Name          = "ListOpenedFileDrv - Top Instance"
Instance3.Altitude      = "385100"
Instance3.Flags         = 0x1          ; Suppress automatic attachments

